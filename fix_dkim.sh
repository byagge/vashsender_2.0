#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è DKIM –ø–æ–¥–ø–∏—Å–∏
# –ó–∞–ø—É—Å–∫–∞—Ç—å –∏–∑ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è: source venv/bin/activate && ./fix_dkim.sh

echo "üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ DKIM –ø–æ–¥–ø–∏—Å–∏ –¥–ª—è VashSender"
echo "================================================"

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –º—ã –≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏
if [[ "$VIRTUAL_ENV" == "" ]]; then
    echo "‚ùå –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ"
    echo "–ó–∞–ø—É—Å—Ç–∏—Ç–µ: source venv/bin/activate"
    exit 1
fi

echo "‚úÖ –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ: $VIRTUAL_ENV"

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Django
echo ""
echo "üìã –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ Django..."
python3 check_django_settings.py

# –ò—Å–ø—Ä–∞–≤–ª—è–µ–º DKIM
echo ""
echo "üìã –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ DKIM..."
python3 fix_dkim_signing.py

echo ""
echo "üéâ –ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é –∫–∞–º–ø–∞–Ω–∏—é –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –ø–∏—Å—å–º–∞."
