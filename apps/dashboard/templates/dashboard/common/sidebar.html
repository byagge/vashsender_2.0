<aside class="fixed inset-y-0 left-0 w-64 bg-white border-r border-gray-200 shadow-sm hidden md:flex flex-col z-50">
    <!-- Фоновые паттерны -->
    <div class="sidebar-pattern"></div>
    <div class="relative z-10 flex flex-col h-full">
        <!-- Логотип / Бренд -->
        <div class="p-6 pb-4">
            <div class="flex items-center space-x-3">
                <svg width="32" height="32" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect x="4" y="8" width="24" height="16" rx="4" fill="#1877ff"/>
                    <path d="M4 8l12 10L28 8" stroke="#fff" stroke-width="2"/>
                </svg>
                <h2 class="text-xl font-bold text-gray-800">vashsender</h2>
            </div>
        </div>
        <!-- Навигация -->
        <nav class="flex-1 px-3 py-6 space-y-1">
            <a href="/dashboard/" class="group flex items-center px-3 py-3 rounded-xl transition-all duration-200 hover:bg-blue-50 hover:scale-[1.02]">
                <div class="flex items-center justify-center w-8 h-8 rounded-lg mr-3 bg-blue-100">
                    <i data-lucide="layout-dashboard" class="w-4 h-4 text-blue-600"></i>
                </div>
                <span class="font-medium text-blue-700">Дашборд</span>
                <div class="ml-auto">
                    <i data-lucide="chevron-right" class="w-4 h-4 text-blue-500"></i>
                </div>
            </a>
            <a href="/lists/" class="group flex items-center px-3 py-3 rounded-xl transition-all duration-200 hover:bg-blue-50 hover:scale-[1.02]">
                <div class="flex items-center justify-center w-8 h-8 rounded-lg mr-3 group-hover:bg-blue-100 transition-colors duration-200">
                    <i data-lucide="users" class="w-4 h-4 text-gray-500 group-hover:text-blue-600"></i>
                </div>
                <span class="font-medium text-gray-700 group-hover:text-blue-700 transition-colors duration-200">Контакты</span>
                <div class="ml-auto opacity-0 group-hover:opacity-100 transition-opacity duration-200">
                    <i data-lucide="chevron-right" class="w-4 h-4 text-blue-500"></i>
                </div>
            </a>
            <a href="/templates/" class="group flex items-center px-3 py-3 rounded-xl transition-all duration-200 hover:bg-blue-50 hover:scale-[1.02]">
                <div class="flex items-center justify-center w-8 h-8 rounded-lg mr-3 group-hover:bg-blue-100 transition-colors duration-200">
                    <i data-lucide="layout" class="w-4 h-4 text-gray-500 group-hover:text-blue-600"></i>
                </div>
                <span class="font-medium text-gray-700 group-hover:text-blue-700 transition-colors duration-200">Шаблоны</span>
                <div class="ml-auto opacity-0 group-hover:opacity-100 transition-opacity duration-200">
                    <i data-lucide="chevron-right" class="w-4 h-4 text-blue-500"></i>
                </div>
            </a>
            <!-- <a href="/emails/" class="group flex items-center px-3 py-3 rounded-xl transition-all duration-200 hover:bg-blue-50 hover:scale-[1.02]">
                <div class="flex items-center justify-center w-8 h-8 rounded-lg mr-3 group-hover:bg-blue-100 transition-colors duration-200">
                    <i data-lucide="mail" class="w-4 h-4 text-gray-500 group-hover:text-blue-600"></i>
                </div>
                <span class="font-medium text-gray-700 group-hover:text-blue-700 transition-colors duration-200">Почты</span>
                <div class="ml-auto opacity-0 group-hover:opacity-100 transition-opacity duration-200">
                    <i data-lucide="chevron-right" class="w-4 h-4 text-blue-500"></i>
                </div>
            </a> -->
            <a href="/campaigns/" class="group flex items-center px-3 py-3 rounded-xl transition-all duration-200 hover:bg-blue-50 hover:scale-[1.02]">
                <div class="flex items-center justify-center w-8 h-8 rounded-lg mr-3 group-hover:bg-blue-100 transition-colors duration-200">
                    <i data-lucide="send" class="w-4 h-4 text-gray-500 group-hover:text-blue-600"></i>
                </div>
                <span class="font-medium text-gray-700 group-hover:text-blue-700 transition-colors duration-200">Рассылки</span>
                <div class="ml-auto opacity-0 group-hover:opacity-100 transition-opacity duration-200">
                    <i data-lucide="chevron-right" class="w-4 h-4 text-blue-500"></i>
                </div>
            </a>
            <div class="h-px bg-gradient-to-r from-transparent via-gray-200 to-transparent my-4"></div>
            <a href="/accounts/settings/" class="group flex items-center px-3 py-3 rounded-xl transition-all duration-200 hover:bg-blue-50 hover:scale-[1.02]">
                <div class="flex items-center justify-center w-8 h-8 rounded-lg mr-3 group-hover:bg-blue-100 transition-colors duration-200">
                    <i data-lucide="settings" class="w-4 h-4 text-gray-500 group-hover:text-blue-600"></i>
                </div>
                <span class="font-medium text-gray-700 group-hover:text-blue-700 transition-colors duration-200">Настройки</span>
                <div class="ml-auto opacity-0 group-hover:opacity-100 transition-opacity duration-200">
                    <i data-lucide="chevron-right" class="w-4 h-4 text-blue-500"></i>
                </div>
            </a>
            <a href="/billing/" class="group flex items-center px-3 py-3 rounded-xl transition-all duration-200 hover:bg-blue-50 hover:scale-[1.02]">
                <div class="flex items-center justify-center w-8 h-8 rounded-lg mr-3 group-hover:bg-blue-100 transition-colors duration-200">
                    <i data-lucide="credit-card" class="w-4 h-4 text-gray-500 group-hover:text-blue-600"></i>
                </div>
                <span class="font-medium text-gray-700 group-hover:text-blue-700 transition-colors duration-200">Тарифы</span>
                <div class="ml-auto opacity-0 group-hover:opacity-100 transition-opacity duration-200">
                    <i data-lucide="chevron-right" class="w-4 h-4 text-blue-500"></i>
                </div>
            </a>
            <a href="/support/" class="group flex items-center px-3 py-3 rounded-xl transition-all duration-200 hover:bg-blue-50 hover:scale-[1.02]">
                <div class="flex items-center justify-center w-8 h-8 rounded-lg mr-3 group-hover:bg-blue-100 transition-colors duration-200">
                    <i data-lucide="help-circle" class="w-4 h-4 text-gray-500 group-hover:text-blue-600"></i>
                </div>
                <span class="font-medium text-gray-700 group-hover:text-blue-700 transition-colors duration-200">Поддержка</span>
                <div class="ml-auto opacity-0 group-hover:opacity-100 transition-opacity duration-200">
                    <i data-lucide="chevron-right" class="w-4 h-4 text-blue-500"></i>
                </div>
            </a>
            <!-- Админ-панель (только для админов) -->
            <template x-if="isAdmin">
                <div class="space-y-1">
                    <a href="/admin/" class="group flex items-center px-3 py-3 rounded-xl transition-all duration-200 hover:bg-blue-50 hover:scale-[1.02]">
                        <div class="flex items-center justify-center w-8 h-8 rounded-lg mr-3 group-hover:bg-blue-100 transition-colors duration-200">
                            <i data-lucide="shield" class="w-4 h-4 text-gray-500 group-hover:text-blue-600"></i>
                        </div>
                        <span class="font-medium text-gray-700 group-hover:text-blue-700 transition-colors duration-200">CMS</span>
                        <div class="ml-auto opacity-0 group-hover:opacity-100 transition-opacity duration-200">
                            <i data-lucide="chevron-right" class="w-4 h-4 text-blue-500"></i>
                        </div>
                    </a>
                    <a href="/django-admin/" class="group flex items-center px-3 py-3 rounded-xl transition-all duration-200 hover:bg-blue-50 hover:scale-[1.02]">
                        <div class="flex items-center justify-center w-8 h-8 rounded-lg mr-3 group-hover:bg-blue-100 transition-colors duration-200">
                            <i data-lucide="settings-2" class="w-4 h-4 text-gray-500 group-hover:text-blue-600"></i>
                        </div>
                        <span class="font-medium text-gray-700 group-hover:text-blue-700 transition-colors duration-200">Админ-панель</span>
                        <div class="ml-auto opacity-0 group-hover:opacity-100 transition-opacity duration-200">
                            <i data-lucide="chevron-right" class="w-4 h-4 text-blue-500"></i>
                        </div>
                    </a>
                    <a href="/moderation/" class="group flex items-center px-3 py-3 rounded-xl transition-all duration-200 hover:bg-blue-50 hover:scale-[1.02]">
                        <div class="flex items-center justify-center w-8 h-8 rounded-lg mr-3 group-hover:bg-blue-100 transition-colors duration-200">
                            <i data-lucide="shield-check" class="w-4 h-4 text-gray-500 group-hover:text-blue-600"></i>
                        </div>
                        <span class="font-medium text-gray-700 group-hover:text-blue-700 transition-colors duration-200">Модерация</span>
                        <div class="ml-auto opacity-0 group-hover:opacity-100 transition-opacity duration-200">
                            <i data-lucide="chevron-right" class="w-4 h-4 text-blue-500"></i>
                        </div>
                    </a>
                </div>
            </template>
        </nav>
        <!-- Профиль пользователя -->
        <div class="mt-auto p-4 border-t border-gray-200 bg-gray-50/50" x-data="{ profileMenuOpen: false }">
            <div class="relative">
                <div class="flex items-center space-x-3 px-3 py-2 rounded-xl hover:bg-white/80 transition-all duration-200 cursor-pointer group" @click="profileMenuOpen = !profileMenuOpen">
                    <div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center shadow-md">
                        <span class="text-white font-medium text-sm">
                            {% if user.full_name %}
                                {{ user.full_name|slice:":2"|upper }}
                            {% else %}
                                {{ user.email|slice:":2"|upper }}
                            {% endif %}
                        </span>
                    </div>
                    <div class="flex-1 min-w-0">
                        <p class="text-gray-800 font-medium text-sm truncate">
                            {% if user.full_name %}
                                {{ user.full_name }}
                            {% else %}
                                {{ user.email }}
                            {% endif %}
                        </p>
                        <p class="text-gray-500 text-xs truncate">{{ user.email }}</p>
                        {% if user.current_plan %}
                            <p class="text-blue-600 text-xs truncate">{{ user.current_plan.title }}</p>
                        {% else %}
                            <p class="text-gray-400 text-xs truncate">Бесплатный план</p>
                        {% endif %}
                    </div>
                    <button class="opacity-60 group-hover:opacity-100 transition-opacity duration-200">
                        <i data-lucide="chevron-down" class="w-4 h-4 text-gray-500"></i>
                    </button>
                </div>
                
                <!-- Выпадающее меню профиля -->
                <div x-show="profileMenuOpen" 
                     x-transition:enter="transition ease-out duration-200"
                     x-transition:enter-start="opacity-0 scale-95"
                     x-transition:enter-end="opacity-100 scale-100"
                     x-transition:leave="transition ease-in duration-150"
                     x-transition:leave-start="opacity-100 scale-100"
                     x-transition:leave-end="opacity-0 scale-95"
                     class="absolute bottom-full left-0 right-0 mb-2 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50">
                    
                    <a href="/accounts/settings/" class="flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors">
                        <i data-lucide="user" class="w-4 h-4 mr-3 text-gray-500"></i>
                        Профиль
                    </a>
                    
                    <a href="/accounts/settings/" class="flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors">
                        <i data-lucide="settings" class="w-4 h-4 mr-3 text-gray-500"></i>
                        Настройки
                    </a>
                    
                    <a href="/billing/" class="flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors">
                        <i data-lucide="credit-card" class="w-4 h-4 mr-3 text-gray-500"></i>
                        Управление тарифами
                    </a>
                    
                    <div class="border-t border-gray-100 my-1"></div>
                    
                    <a href="/accounts/logout/" class="flex items-center px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors">
                        <i data-lucide="log-out" class="w-4 h-4 mr-3 text-red-500"></i>
                        Выйти
                    </a>
                </div>
            </div>
        </div>
    </div>
</aside>

<script>
    // Инициализация Lucide Icons для сайдбара
    document.addEventListener('DOMContentLoaded', function() {
        if (typeof lucide !== 'undefined') {
            lucide.createIcons();
        }
        
        // Закрытие меню профиля при клике вне его
        document.addEventListener('click', function(event) {
            const profileMenu = document.querySelector('[x-data*="profileMenuOpen"]');
            if (profileMenu && !profileMenu.contains(event.target)) {
                const alpineComponent = Alpine.$data(profileMenu);
                if (alpineComponent && alpineComponent.profileMenuOpen) {
                    alpineComponent.profileMenuOpen = false;
                }
            }
        });
    });
</script> 